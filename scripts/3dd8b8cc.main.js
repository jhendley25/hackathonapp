function clickEvents(){var a;$("#my-routes").click(function(){showMyRoutes()}),$("#home-btn").click(function(){returnHome()}),$("#show-preview-btn").click(function(){a=Route.createFromForm(),generateRoutePreview(a)}),$("#confirm-route").click(function(){saveRouteInfo(a),animateToHomeScreen(),clearInputs()}),$("#cancel-route").click(function(){animateToHomeScreen()})}function generateRoutePreview(a){animateShowPreview(),$("#routename-preview").html(a.get("name")),$("#routerating-preview").html(a.get("rating")),$("#routetype-preview").html(a.get("type")),$("#routedegree-preview").html(a.get("degree")),$("#rocktype-preview").html(a.get("rocktype")),$("#routedesc-preview").html(a.get("desc"))}function updateSidebar(a){var b=$(".route-list ul"),c="<li>"+a.get("name")+", "+a.get("rating")+"</li>";b.append(c)}function updateMyRoutes(a){var b=$(".my-routes-list"),c=a.id,d=_.template($("#accordian-template").text());b.append(d({routeId:c,route:a})),$("#"+c+".edit-route-button").click(function(){var a=this.id;hideMyRoutes(),editRoute(a)}),$("#"+c+".delete-route-button").click(function(){var a=this.id;deleteRoute(a)})}function deleteRoute(a){var a=a,b=new Parse.Query(Route);b.get(a,{success:function(a){a.destroy({success:function(){console.log("route successfully removed"),refreshRouteLists()},error:function(){console.log("route not deleted")}})}})}function saveRouteInfo(a){a.save(null,{success:function(a){console.log("Success!"),updateSidebar(a),updateMyRoutes(a)},error:function(){console.log("No Luck!")}})}function editRoute(a){var a=a,b=new Parse.Query(Route);b.get(a,{success:function(a){console.log("editRoute is being called"),$("#routename").val(a.get("name")),$("#routerating").val(a.get("rating")),$("#routetype").val(a.get("type")),$("#routedegree").val(a.get("degree")),$("#rocktype").val(a.get("rocktype")),$("#routedesc").val(a.get("desc")),$("#show-preview-btn").css("display","none"),$("#confirm-route-update-button").css("display","block"),$("#confirm-route-update-button").click(function(){confirmUpdate(a)})},error:function(){console.log("no luck getting the object")}})}function refreshRouteLists(){$(".my-routes-list").html(""),$(".route-list ul").html(""),console.log("about to fetch!"),routes.fetch({success:function(a){a.each(function(a){console.log("what"),updateSidebar(a),updateMyRoutes(a)})}})}function confirmUpdate(a){a.updateFromForm(),a.save(null,{success:function(){$("#show-preview-btn").css("display","block"),$("#confirm-route-update-button").css("display","none"),showMyRoutes(),console.log("confirmUpdate is being run"),refreshRouteLists()},error:function(){console.log("there was an error saving the function")}})}function animateGettingStarted(){$(".getting-started").hide(),$(".getting-started-overlay").animate({width:"0"},500,function(){}),$(".welcome-logo").hide(),$(".img-holder").show(),$(".home-left-column").show()}function animateShowPreview(){$(".preview-route-info").animate({width:"100%"},500,function(){}),$(".preview-route-info").show(),$(".home-left-column").hide()}function animateToHomeScreen(){$(".preview-route-info").animate({width:"0"},500,function(){}),$(".preview-route-info").hide("slow"),$(".home-left-column").show()}function showMyRoutes(){$(".my-routes-overlay").show("slow"),$(".my-routes-display").show()}function hideMyRoutes(){$(".my-routes-overlay").hide("slow"),$(".my-routes-display").hide()}function clearInputs(){$("input").val(""),$("textarea").val("")}function returnHome(){"block"==$(".my-routes-overlay").css("display")?hideMyRoutes():"block"==$(".preview-route-info").css("display")?animateToHomeScreen():animateGettingStarted()}var Route=Parse.Object.extend("Route",{updateFromForm:function(){this.set("name",$("#routename").val()),this.set("rating",$("#routerating").val()),this.set("type",$("#routetype").val()),this.set("degree",$("#routedegree").val()),this.set("rocktype",$("#rocktype").val()),this.set("desc",$("#routedesc").val())}},{createFromForm:function(){var a=new Route;return a.set("name",$("#routename").val()),a.set("rating",$("#routerating").val()),a.set("type",$("#routetype").val()),a.set("degree",$("#routedegree").val()),a.set("rocktype",$("#rocktype").val()),a.set("desc",$("#routedesc").val()),a}}),RouteCollection=Parse.Collection.extend({model:Route});routes=new RouteCollection,$(document).ready(function(){clickEvents(),routes.fetch({success:function(a){a.each(function(a){updateSidebar(a),updateMyRoutes(a)})}})});